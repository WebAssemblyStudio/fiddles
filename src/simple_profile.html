<!DOCTYPE html>
<html>
<body>

<button onclick="myFunction()">Click me</button>

<p id="demo"></p>

<script src="cn.js"></script>

<script>

var cn = Module.cwrap('hash_cn', 'string', ['string','string','number','number']);

// https://github.com/SChernykh/monero/blob/5fd83c13fbf8dc304909345e60a853c15b0de1e5/tests/hash/tests-slow-2.txt
//
// 4cf1ff9ca46eb433b36cd9f70e02b14cc06bfd18ca77fa9ccaafd1fd96c674b0 5468697320697320612074657374205468697320697320612074657374205468697320697320612074657374
// 7d292e43f4751714ec07dbcb0e4bbffe2a7afb6066420960684ff57d7474c871 4c6f72656d20697073756d20646f6c6f722073697420616d65742c20636f6e73656374657475722061646970697363696e67
// 335563425256edebf1d92dc342369c2f4770ebb4112ba975659bd8a0f210abd0 656c69742c2073656420646f20656975736d6f642074656d706f7220696e6369646964756e74207574206c61626f7265
// 47758e86d2f57210366cec36fff26f9464d89efd116fe6ef28b718b5da120801 657420646f6c6f7265206d61676e6120616c697175612e20557420656e696d206164206d696e696d2076656e69616d2c
// 48787b48d5c68f0c1dd825c32580af741cc0ee314f08133135c1e86d87a24a95 71756973206e6f737472756420657865726369746174696f6e20756c6c616d636f206c61626f726973206e697369
// 93bdf47495854f7cfaaca1af8c0f39ef4a3024c10eb0dea23726b0e06ef29e84 757420616c697175697020657820656120636f6d6d6f646f20636f6e7365717561742e20447569732061757465
// a375a71d0541057ccc96719150dfe10b6e6f486b19cf4a0835e19605413a8417 697275726520646f6c6f7220696e20726570726568656e646572697420696e20766f6c7570746174652076656c6974
// 163478a76f8f1432533fbdd1284d65c89f37479e54f20841c6ce4eba56c73854 657373652063696c6c756d20646f6c6f726520657520667567696174206e756c6c612070617269617475722e
// 356b0470c6eea75cad7a108179e232905b23bdaf03c2824c6e619d503ee93677 4578636570746575722073696e74206f6363616563617420637570696461746174206e6f6e2070726f6964656e742c
// a47e2b007dc25bb279e197a1b91f67ecebe2ddd8791cd32dd2cb76dd21ed943f 73756e7420696e2063756c706120717569206f666669636961206465736572756e74206d6f6c6c697420616e696d20696420657374206c61626f72756d2e


<!DOCTYPE html>
<html>
<body>

<button onclick="myFunction()">Click me</button>

<p id="demo"></p>

<script src="cn.js"></script>

<script>

var cn = Module.cwrap('hash_cn', 'string', ['string','string','number','number']);

function myFunction2() {
  toTest = "5468697320697320612074657374205468697320697320612074657374205468697320697320612074657374";
  var t0 = performance.now();
  for(i=0;i<100;i++) cn(toTest,toTest.substring(78,86),0,2);
  var t1 = performance.now();
  alert("10 cryptonight hashes took " + (t1 - t0) + " milliseconds.")
}

function myFunction() {

  blob = "01111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111113";
  alert(cn(blob,blob.substring(78,86),0,0));
  
  blob = "01111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111113";
  alert(cn(blob,blob.substring(78,86),1,0));
  
  blob = "11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111113";
  alert(cn(blob,blob.substring(78,86),0,1));
  
  blob = "11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111113";
  alert(cn(blob,blob.substring(78,86),1,1));
    
  blob = "5468697320697320612074657374205468697320697320612074657374205468697320697320612074657374";
  alert(cn(blob,blob.substring(78,86),0,2));
  
  blob = "5468697320697320612074657374205468697320697320612074657374205468697320697320612074657374";
  alert(cn(blob,blob.substring(78,86),1,2));
}

function myFunction3() {
  test("5468697320697320612074657374205468697320697320612074657374205468697320697320612074657374");
  test("4c6f72656d20697073756d20646f6c6f722073697420616d65742c20636f6e73656374657475722061646970697363696e67");
  test("656c69742c2073656420646f20656975736d6f642074656d706f7220696e6369646964756e74207574206c61626f7265");
  test("657420646f6c6f7265206d61676e6120616c697175612e20557420656e696d206164206d696e696d2076656e69616d2c");
  test("71756973206e6f737472756420657865726369746174696f6e20756c6c616d636f206c61626f726973206e697369");
  test("757420616c697175697020657820656120636f6d6d6f646f20636f6e7365717561742e20447569732061757465");
  test("697275726520646f6c6f7220696e20726570726568656e646572697420696e20766f6c7570746174652076656c6974");
  test("657373652063696c6c756d20646f6c6f726520657520667567696174206e756c6c612070617269617475722e");
  test("4578636570746575722073696e74206f6363616563617420637570696461746174206e6f6e2070726f6964656e742c");
  test("73756e7420696e2063756c706120717569206f666669636961206465736572756e74206d6f6c6c697420616e696d20696420657374206c61626f72756d2e");
}

function test(blob) {
    hash = cn(blob,blob.substring(78,86),0,2);
    alert(hash);
}

</script>

</body>
</html>

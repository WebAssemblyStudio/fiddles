
// Now handles fill requests with RGB colors. Next handle rects with pixel data.

var width = undefined;
var height = undefined;
var spriteSheetData = undefined;

const memory = new WebAssembly.Memory({ initial: 256, maximum: 512 });

var onEnterFrame = function(waInstance, ctx) {

    const fillReqCount = waInstance.exports.fillRequestCount();
    
    if (fillReqCount > 0) {
      const fillReq = waInstance.exports.fillRequest();
      const data = new Int32Array(waInstance.exports.memory.buffer, fillReq, 5 * fillReqCount);

      for (var i=0; i < fillReqCount * 5; i+=5) {
        const col = '#' + (data[i + 4]&0xffffff).toString(16);
        ctx.fillStyle=col;
        ctx.fillRect(data[i+0],data[i+1],data[i+2],data[i+3]);
      }
    }

    

    // const data = new Uint8ClampedArray(waInstance.exports.memory.buffer, pointer, width * height * 4);
    // const img = new ImageData(spriteSheetData, 2, 2);

    // ctx.putImageData(img, 0, 0);
    // ctx.putImageData(img, 0, 0);
    
    requestAnimationFrame(function() {
        onEnterFrame(waInstance, ctx);
    });
}

const decode = (b64) => {
  const str = window.atob(b64);
  const array = new Uint8Array(str.length);
  for (let i = 0; i < str.length; i += 1) {
    array[i] = str.charCodeAt(i);
  }
  return array.buffer;
};

const wasm64 = "AGFzbQEAAAABCAJgAABgAAF/AwkIAAEBAQEBAQEEBQFwAQEBBQMBAAIGFQN/AUHQqgQLfwBB0KoEC38AQcgqCwd0CQZtZW1vcnkCAAtfX2hlYXBfYmFzZQMBCl9fZGF0YV9lbmQDAhBmaWxsUmVxdWVzdENvdW50AAELZmlsbFJlcXVlc3QAAhFyZW5kZXJEYXRhUG9pbnRlcgADBXdpZHRoAAQGaGVpZ2h0AAUGcmVuZGVyAAYK6QUIAgALBABBAguFAgEDf0EAQgA3A5CIgIAAQQBCioCAgKABNwOYiICAAEEAQYD+/wc2AqCIgIAAQQAQh4CAgABBA29BACgChIiAgABqQX9qNgKEiICAAEEAEIeAgIAAQQNvQQAoAoiIgIAAakF/aiIANgKIiICAAEEAIQECQAJAQQAoAoSIgIAAIgJBAEgNAEEJIQEgAkEKSA0BC0EAIAE2AoSIgIAAIAEhAgtBACEBAkACQCAAQQBIDQBBCSEBIABBCkgNAQtBACABNgKIiICAACABIQALQQAgADYCqIiAgABBACACNgKkiICAAEEAQoKAgIAgNwKsiICAAEEAQZOp/Ac2ArSIgIAAQZCIgIAACwgAQZCIgIAACwQAQQoLBABBCguWAwEBf0EAIQADQCAAQbCngIAAahCHgICAADYCACAAQbSngIAAahCHgICAADYCACAAQbingIAAahCHgICAADYCACAAQbyngIAAahCHgICAADYCACAAQcCngIAAahCHgICAADYCACAAQcSngIAAahCHgICAADYCACAAQcingIAAahCHgICAADYCACAAQcyngIAAahCHgICAADYCACAAQdCngIAAahCHgICAADYCACAAQdSngIAAahCHgICAADYCACAAQShqIgBBkANHDQALQQBBACgCgIiAgAAiADYC3KeAgABBACAANgKEqICAAEEAIAA2AqyogIAAQQAgADYC1KiAgABBACAANgL8qICAAEEAIAA2ArCogIAAQQAgADYCtKiAgABBACAANgLop4CAAEEAIAA2ApCogIAAQQAgADYCuKiAgABBACAANgLgqICAAEEAIAA2AoipgIAAQQAgADYC8KeAgABBACAANgKYqICAAEEAIAA2AsCogIAAQQAgADYC6KiAgABBACAANgKQqYCAAEGwp4CAAAstAQF+QQBBACkDwKqAgABCrf7V5NSF/ajYAH5CAXwiADcDwKqAgAAgAEIhiKcLC9IiAgBBgAgLDAAAAP8EAAAABAAAAABBkAgLuCIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIUECy5kZWJ1Z19pbmZvbwEAAAQAAAAAAAQBAAAAAAwA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ABgFBwohBQoGLgUJWAUHIAUBBnUCAQABAQQCAAUCvAIAAAMLAQUgCj0FHwYIWAUlPAUHIAUNBpEFCQZYBQIgAgEAAQEAqwMKLmRlYnVnX3N0cmNsYW5nIHZlcnNpb24gOC4wLjAgKHRydW5rIDM0MTk2MCkAL3RtcC9idWlsZF94YmtiNTlqcjFrcy4kL2ZpbGUuYwAvdG1wL2J1aWxkX3hia2I1OWpyMWtzLiQAcmVkAGludABibGFjawBieABieQBkYXRhAF9fQVJSQVlfU0laRV9UWVBFX18AcmVuZGVyRGF0YQBmaWxsUmVxdWVzdENvdW50AGZpbGxSZXF1ZXN0AHJlbmRlckRhdGFQb2ludGVyAHdpZHRoAGhlaWdodAByZW5kZXIAeQB4AHl3AGNsYW5nIHZlcnNpb24gOC4wLjAgKHRydW5rIDM0MTk2MCkAL2hvbWUveXVyeS9Xb3JrL3dhc21jZXB0aW9uL3NyYy9tdXNsL3NyYy9wcm5nL3JhbmQuYwAvaG9tZS95dXJ5L1dvcmsvd2FzbWNlcHRpb24vYnVpbGQvbXVzbABzZWVkAGxvbmcgbG9uZyB1bnNpZ25lZCBpbnQAdWludDY0X3QAc3JhbmQAcmFuZABpbnQAcwB1bnNpZ25lZCBpbnQAAGoEbmFtZQFjCAARX193YXNtX2NhbGxfY3RvcnMBEGZpbGxSZXF1ZXN0Q291bnQCC2ZpbGxSZXF1ZXN0AxFyZW5kZXJEYXRhUG9pbnRlcgQFd2lkdGgFBmhlaWdodAYGcmVuZGVyBwRyYW5k";

WebAssembly.instantiate(new Uint8Array(decode(wasm64)), { env: { memory } }).then(results => {
  instance = results.instance;

  width = instance.exports.width();
  height = instance.exports.height();

  // spriteSheetData = decode(document.getElementById('spritesheet').innerHTML);

  const canvas = document.getElementById('c');
  canvas.width = width;
  canvas.height = height;
  const ctx = canvas.getContext('2d');
  onEnterFrame(instance, ctx);

}).catch(console.error);